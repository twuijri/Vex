# ๐ค ุจูุช ุฅุฏุงุฑุฉ ุงููุฌููุนุงุช - Telegram Group Management Bot

ุจูุช ุชูููุฌุฑุงู ุญุฏูุซ ูุฅุฏุงุฑุฉ ุงููุฌููุนุงุช ูุจูู ุจู **aiogram 3.x** ู **MongoDB** ูุน ูุงุฌูุฉ ุชูุงุนููุฉ ุจุฏูู ุฃูุงูุฑ.

## โจ ุงููููุฒุงุช

### ๐ฏ ุงูููุฒุงุช ุงูุฃุณุงุณูุฉ
- โ **ูุงุฌูุฉ ุชูุงุนููุฉ ุจุงููุงูู** - ุจุฏูู ุฃูุงูุฑ (ููุท /start ู /admin)
- โ **ูุธุงู ููู ูุชูุฏู** - ูุฏููุ ูููู ูุฌุฏููุ ูุคูุช
- โ **ููุงุชุฑ ูุณุงุฆุท ุดุงููุฉ** - 20 ููุน (ุตูุฑุ ููุฏููุ ุฑูุงุจุทุ ูุงุดุชุงูุงุชุ ุฅูุฎ)
- โ **ุฅุฏุงุฑุฉ ุงููููุงุช** - ูููุงุช ูุญุธูุฑุฉ ููุณููุญ ุจูุง
- โ **ุฑุณุงุฆู ุชุฑุญูุจ ูุฎุตุตุฉ** - ูุน ุฃุฒุฑุงุฑ ูุงุจูุฉ ููุชุฎุตูุต
- โ **ููุงููู ุงููุฌููุนุฉ** - ูุน ุฃุฒุฑุงุฑ ูุตูุงุญูุงุช
- โ **ุฌุฏููุฉ ุชููุงุฆูุฉ** - ููู/ูุชุญ ุงููุฌููุนุฉ ุญุณุจ ุงูููุช
- โ **ุตูุงุญูุงุช ูุฑูุฉ** - 8 ุตูุงุญูุงุช ูุงุจูุฉ ููุชุฎุตูุต ุนูุฏ ุงูููู

### ๐ง ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ
- **Python 3.11+**
- **aiogram 3.13.1** - ุฅุทุงุฑ ุนูู Telegram Bot ุญุฏูุซ
- **MongoDB** - ูุงุนุฏุฉ ุจูุงูุงุช NoSQL
- **Motor 3.6.0** - Driver ุบูุฑ ูุชุฒุงูู ูู MongoDB
- **Beanie 1.26.0** - ODM ูู MongoDB
- **APScheduler 3.10.4** - ุฌุฏููุฉ ุงูููุงู
- **Docker & Docker Compose** - ูููุดุฑ ุงูุณูู

## ๐ ุงููุชุทูุจุงุช

- Python 3.11 ุฃู ุฃุญุฏุซ
- MongoDB 7.0 ุฃู ุฃุญุฏุซ (ุฃู MongoDB Atlas)
- Docker ู Docker Compose (ุงุฎุชูุงุฑู)

## ๐ ุงูุชุซุจูุช ูุงูุชุดุบูู

### ุงูุทุฑููุฉ 1: ุจุงุณุชุฎุฏุงู Docker (ููุตู ุจูุง)

1. **ุงุณุชูุณุงุฎ ุงููุดุฑูุน:**
```bash
git clone <repository-url>
cd boter
```

2. **ุฅูุดุงุก ููู ุงูุจูุฆุฉ:**
```bash
cp .env.example .env
```

3. **ุชุนุฏูู ููู .env:**
```env
BOT_TOKEN=your_bot_token_here
MONGO_URI=mongodb://admin:password@mongodb:27017/telegram_bot?authSource=admin
ADMIN_IDS=123456789,987654321
LOG_LEVEL=INFO
```

4. **ุชุดุบูู ุงูุจูุช:**
```bash
docker-compose up -d
```

5. **ูุดุงูุฏุฉ ุงูุณุฌูุงุช:**
```bash
docker-compose logs -f bot
```

### ุงูุทุฑููุฉ 1.5: ูุดุฑ ุนูู Portainer (ุงูุฃูุถู ููุณูุฑูุฑุงุช)

1. **ุฅุนุฏุงุฏ ุงูุณูุฑูุฑ:**
   - ุฑูุจ Docker ู Portainer ุนูู ุงูุณูุฑูุฑ
   - ุงูุชุญ Portainer ูู ุงููุชุตูุญ

2. **ุฅูุดุงุก Stack ุฌุฏูุฏ:**
   - ุงูุณุฎ ูุญุชูู `docker-compose.prod.yml`
   - ุงูุตู ูู Portainer > Stacks > Add Stack

3. **ุฅุถุงูุฉ Environment Variables:**
   ูู Portainerุ ุฃุถู ุงููุชุบูุฑุงุช:
   ```
   BOT_TOKEN=your_token
   MONGO_URI=mongodb+srv://user:pass@cluster.mongodb.net/?appName=yourapp
   MONGO_DB_NAME=coffeeBot
   ADMIN_IDS=123456789
   ADMIN_GROUP_ID=-1001234567890
   LOG_LEVEL=INFO
   ```

4. **ุงููุดุฑ:**
   - ุงุถุบุท "Deploy Stack"
   - ุชุงุจุน ุงูุณุฌูุงุช ูู Logs tab

5. **ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ:**
   ```bash
   # ุจุนุฏ push ููู repo
   # ูู Portainer: Re-pull image โ Redeploy
   ```

### ุงูุทุฑููุฉ 2: ุชุดุบูู ูุญูู

1. **ุฅูุดุงุก ุจูุฆุฉ ุงูุชุฑุงุถูุฉ:**
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# ุฃู
venv\Scripts\activate  # Windows
```

2. **ุชุซุจูุช ุงููุชุทูุจุงุช:**
```bash
pip install -r requirements.txt
```

3. **ุฅูุดุงุก ููู .env:**
```bash
cp .env.example .env
```

4. **ุชุนุฏูู MONGO_URI ููุงุชุตุงู ุจู MongoDB ูุญูู ุฃู Atlas:**
```env
# MongoDB ูุญูู
MONGO_URI=mongodb://localhost:27017/telegram_bot

# ุฃู MongoDB Atlas
MONGO_URI=mongodb+srv://username:password@cluster.mongodb.net/telegram_bot
```

5. **ุชุดุบูู ุงูุจูุช:**
```bash
python -m bot
```

## ๐ ุงูุงุณุชุฎุฏุงู

### ูููุณุชุฎุฏููู ุงูุนุงุฏููู:
1. ุงุจุฏุฃ ูุญุงุฏุซุฉ ูุน ุงูุจูุช: `/start`
2. ุฃุถู ุงูุจูุช ุฅูู ูุฌููุนุชู
3. ุงุฌุนูู ูุดุฑูุงู ูุน ุตูุงุญูุงุช:
   - ุญุฐู ุงูุฑุณุงุฆู
   - ุญุธุฑ ุงููุณุชุฎุฏููู
   - ุชูููุฏ ุงูุฃุนุถุงุก
   - ุฏุนูุฉ ุงููุณุชุฎุฏููู

### ูููุดุฑููู:
1. ุงุณุชุฎุฏู `/admin` ููุชุญ ููุญุฉ ุงูุชุญูู
2. ุงุฎุชุฑ ุงููุฌููุนุฉ ูู ุงููุงุฆูุฉ
3. ูู ุจุชุฎุตูุต ุงูุฅุนุฏุงุฏุงุช ุนุจุฑ ุงูุฃุฒุฑุงุฑ ุงูุชูุงุนููุฉ

## ๐๏ธ ุงูุฅุนุฏุงุฏุงุช ุงููุชุงุญุฉ

### ๐ ูุธุงู ุงูููู
- **ููู ูุฏูู:** ุชูุนูู/ุชุนุทูู ููุฑู
- **ููู ูููู:** ุฌุฏููุฉ ุฃููุงุช ุงููุชุญ ูุงูุฅุบูุงู
- **ููู ูุคูุช:** ููู ููุฏุฉ ูุญุฏุฏุฉ (ุฏูุงุฆู/ุณุงุนุงุช)
- **ุงูุตูุงุญูุงุช:** 8 ุตูุงุญูุงุช ูุงุจูุฉ ููุชุฎุตูุต:
  - ุฅุฑุณุงู ุงูุฑุณุงุฆู
  - ุฅุฑุณุงู ุงููุณุงุฆุท
  - ุฅุฑุณุงู ุงูููุตูุงุช
  - ุฅุฑุณุงู ุงูุงุณุชุทูุงุนุงุช
  - ุฅุถุงูุฉ ุฑูุงุจุท
  - ุชุบููุฑ ูุนูููุงุช ุงููุฌููุนุฉ
  - ุฏุนูุฉ ูุณุชุฎุฏููู
  - ุชุซุจูุช ุงูุฑุณุงุฆู

### ๐ ููุงุชุฑ ุงููุณุงุฆุท (20 ููุน)
- ุตูุฑุ ููุฏููุ ุตูุชุ ูููุงุช
- ููุตูุงุชุ GIFุ ููุฏูู ุฏุงุฆุฑู
- ุฑูุงุจุทุ ูุงุดุชุงูุงุชุ ุฃุฑูุงู ููุงุชู
- ุฑุณุงุฆู ูุญููุฉุ ุฑุณุงุฆู ุงูุงูุถูุงู/ุงููุบุงุฏุฑุฉ
- ุงููููุนุ ุงูุฃูุนุงุจุ ูุฃูุซุฑ...

### ๐ ุฅุฏุงุฑุฉ ุงููููุงุช
- **ูููุงุช ูุญุธูุฑุฉ:** ุญุฐู ุชููุงุฆู ููุฑุณุงุฆู
- **ูููุงุช ูุณููุญ ุจูุง:** ุงุณุชุซูุงุกุงุช ูู ุงูุญุธุฑ
- ุฅุถุงูุฉ/ุญุฐู/ุนุฑุถ ุงูููุงุฆู

### ๐ ุงูุชุฑุญูุจ
- ุฑุณุงูุฉ ุชุฑุญูุจ ูุฎุตุตุฉ
- ูุชุบูุฑุงุช ุฏููุงููููุฉ: `{name}`, `{username}`, `{mention}`, `{group}`
- ุฃุฒุฑุงุฑ ูุฎุตุตุฉ ูุน ุฑูุงุจุท

### ๐ฉ ุงูููุงููู
- ูุต ููุงููู ุงููุฌููุนุฉ
- ุฃุฒุฑุงุฑ ูุฎุตุตุฉ
- ุตูุงุญูุงุช: ูู ููููู ุนุฑุถ ุงูููุงููู
- ููุงู ุงูุฅุฑุณุงู: ูู ุงููุฌููุนุฉ ุฃู ุงูุฎุงุต

## ๐๏ธ ูููู ุงููุดุฑูุน

```
boter/
โโโ bot/
โ   โโโ __init__.py
โ   โโโ core/
โ   โ   โโโ bot.py          # ุฅุฏุงุฑุฉ ุงูุจูุช
โ   โ   โโโ config.py       # ุงูุฅุนุฏุงุฏุงุช
โ   โ   โโโ states.py       # ุญุงูุงุช FSM
โ   โโโ database/
โ   โ   โโโ models.py       # ููุงุฐุฌ MongoDB
โ   โ   โโโ connection.py   # ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โโโ handlers/
โ   โ   โโโ start.py        # ูุนุงูุฌ /start
โ   โ   โโโ admin.py        # ูุนุงูุฌ /admin
โ   โโโ keyboards/
โ   โ   โโโ builders.py     # ุจูุงุก ุงูุฃุฒุฑุงุฑ
โ   โ   โโโ callbacks/      # ูุนุงูุฌุงุช ุงูุฃุฒุฑุงุฑ
โ   โโโ services/
โ   โ   โโโ filters.py      # ููุชุฑุฉ ุงูุฑุณุงุฆู
โ   โ   โโโ scheduler.py    # ุฌุฏููุฉ ุงูููุงู
โ   โ   โโโ permissions.py  # ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช
โ   โโโ middlewares/
โ   โ   โโโ __init__.py
โ   โโโ utils/
โ       โโโ constants.py    # ุงูุซูุงุจุช
โ       โโโ helpers.py      # ุฏูุงู ูุณุงุนุฏุฉ
โโโ __main__.py             # ููุทุฉ ุงูุฏุฎูู
โโโ requirements.txt
โโโ Dockerfile
โโโ docker-compose.yml
โโโ .env.example
โโโ README.md
```

## ๐ ุงูุฃูุงู

- โ ุฌููุน ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
- โ ุงูุชุญูู ูู ุตูุงุญูุงุช ุงููุดุฑููู
- โ ุชุดุบูู Docker ุจูุณุชุฎุฏู ุบูุฑ root
- โ ุชุณุฌูู ุฌููุน ุงูุฃุญุฏุงุซ ุงููููุฉ
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงูุดุงููุฉ

## ๐ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ูููุฐุฌ ุงููุฌููุนุฉ (Group)
```python
{
  "chat_id": int,
  "chat_title": str,
  "active": bool,
  "media": {
    "photo": bool,
    "video": bool,
    "audio": bool,
    # ... 20 ููุน
  },
  "antispam": {
    "blocked_words": {...},
    "allowed_words": {...}
  },
  "silent": {
    "manual_lock": bool,
    "daily_schedule": {...},
    "timer_lock": {...},
    "saved_permissions": {...}
  },
  "welcome": {
    "active": bool,
    "message": str,
    "buttons": [...]
  },
  "rules": {
    "active": bool,
    "text": str,
    "buttons": [...],
    "admin_only": bool,
    "send_in_group": bool
  }
}
```

## ๐๏ธ ุงูุชุทููุฑ

### ุฅุถุงูุฉ ููุฒุฉ ุฌุฏูุฏุฉ:

1. **ุฅูุดุงุก Handler:**
```python
# bot/handlers/new_feature.py
from aiogram import Router
router = Router(name="new_feature")

@router.message(...)
async def handle_feature(message: Message):
    pass
```

2. **ุฅูุดุงุก Callback:**
```python
# bot/keyboards/callbacks/new_feature.py
from aiogram import Router, F
router = Router(name="new_feature_callbacks")

@router.callback_query(F.data.startswith("feature:"))
async def handle_callback(callback: CallbackQuery):
    pass
```

3. **ุงูุชุณุฌูู:**
```python
# bot/handlers/__init__.py
from . import new_feature
new_feature.router.include_router(dp)
```

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงูุจูุช ูุง ูุณุชุฌูุจ:
- ุชุญูู ูู ุตุญุฉ `BOT_TOKEN`
- ุชุญูู ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช
- ุฑุงุฌุน ุงูุณุฌูุงุช: `docker-compose logs bot`

### ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุง ุชุนูู:
- ุชุญูู ูู `MONGO_URI`
- ุชุฃูุฏ ูู ุชุดุบูู MongoDB
- ุฑุงุฌุน ุงูุณุฌูุงุช: `docker-compose logs mongodb`

### ุงูุจูุช ูุง ูุญุฐู ุงูุฑุณุงุฆู:
- ุชุฃูุฏ ูู ุฃู ุงูุจูุช ูุดุฑู
- ุชุฃูุฏ ูู ุตูุงุญูุฉ "ุญุฐู ุงูุฑุณุงุฆู"
- ุชุญูู ูู ุฅุนุฏุงุฏุงุช ุงูููุงุชุฑ

## ๐ ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ููุชูุญ ุงููุตุฏุฑ ููุชุงุญ ููุงุณุชุฎุฏุงู ุงูุดุฎุตู ูุงูุชุฌุงุฑู.

## ๐ค ุงููุณุงููุฉ

ุงููุณุงููุงุช ูุฑุญุจ ุจูุง! ูุฑุฌู:
1. Fork ุงููุดุฑูุน
2. ุฅูุดุงุก ูุฑุน ููููุฒุฉ (`git checkout -b feature/AmazingFeature`)
3. Commit ุงูุชุบููุฑุงุช (`git commit -m 'Add some AmazingFeature'`)
4. Push ูููุฑุน (`git push origin feature/AmazingFeature`)
5. ูุชุญ Pull Request

## ๐ง ุงูุฏุนู

ููุฏุนู ูุงูุงุณุชูุณุงุฑุงุชุ ูุฑุฌู ูุชุญ Issue ูู GitHub.

## ๐ ุดูุฑ ุฎุงุต

- [aiogram](https://github.com/aiogram/aiogram) - ุฅุทุงุฑ ุนูู ุฑุงุฆุน
- [MongoDB](https://www.mongodb.com/) - ูุงุนุฏุฉ ุจูุงูุงุช ูููุฉ
- [Beanie](https://github.com/roman-right/beanie) - ODM ููุชุงุฒ

---

ุตููุน ุจู โค๏ธ ุจุงุณุชุฎุฏุงู Python ู aiogram
