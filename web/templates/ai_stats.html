{% extends "base.html" %}
{% block title %}Vex โ ุฅุญุตุงุฆูุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู{% endblock %}
{% block page_title %}๐ ุฅุญุตุงุฆูุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">ุฅุญุตุงุฆูุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู</h1>
    <p class="page-subtitle">ุฃุฏุงุก ูู ูุฒูุฏ ูุนุฏุฏ ุงูุทูุจุงุช</p>
</div>

{% if stats %}
<div class="card" style="padding:0;">
    <div class="table-wrap">
        <table class="table">
            <thead>
                <tr>
                    <th>ุงููุฒูุฏ</th>
                    <th>ุงููููุฐุฌ</th>
                    <th>ุงูุทูุจุงุช</th>
                    <th>ุงููุฌุงุญ</th>
                    <th>ุงููุดู</th>
                    <th>ูุชูุณุท ุงููุชูุฌุฉ</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {% for s in stats %}
                <tr>
                    <td>
                        <span class="badge badge-navy">{{ s.provider_type }}</span>
                    </td>
                    <td style="font-size:0.83rem;color:var(--text-muted);direction:ltr;text-align:left;">{{ s.model }}
                    </td>
                    <td><strong>{{ s.total_calls }}</strong></td>
                    <td><span class="badge badge-success">{{ s.success_calls }}</span></td>
                    <td><span class="badge badge-danger">{{ s.error_calls }}</span></td>
                    <td>
                        {% if s.avg_score is not none %}
                        <div style="display:flex;align-items:center;gap:0.5rem;">
                            <div style="width:80px;height:6px;background:var(--bg);border-radius:3px;overflow:hidden;">
                                <div
                                    style="width:{{ (s.avg_score * 100)|int }}%;height:100%;background:{% if s.avg_score > 0.65 %}var(--danger){% elif s.avg_score > 0.4 %}var(--warning){% else %}var(--success){% endif %};border-radius:3px;">
                                </div>
                            </div>
                            <span style="font-size:0.8rem;font-weight:700;">{{ '%.0f'|format(s.avg_score * 100)
                                }}%</span>
                        </div>
                        {% else %}โ{% endif %}
                    </td>
                    <td>
                        <form method="post" action="/dashboard/ai-stats/delete/{{ s.id }}"
                            onsubmit="return confirm('ุญุฐู ุงูุณุฌูุ')">
                            <button type="submit" class="btn btn-danger btn-sm">๐๏ธ</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% else %}
<div class="card">
    <div class="empty-state">
        <div class="empty-state-icon">๐</div>
        <div class="empty-state-text">ูุง ุชูุฌุฏ ุฅุญุตุงุฆูุงุช ุจุนุฏ โ ุงุจุนุซ ุฑุณุงุฆู ููุจูุช ููุจุฏุฃ ุงูุชุญููู</div>
    </div>
</div>
{% endif %}
{% endblock %}