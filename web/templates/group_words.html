{% extends "base.html" %}

{% block title %}Vex â€” ÙƒÙ„Ù…Ø§Øª {{ group.group_name }}{% endblock %}

{% block head %}
<style>
    .words-grid {
        display: flex;
        flex-wrap: wrap;
        gap: 0.6rem;
        margin: 1rem 0 1.5rem;
        min-height: 60px;
    }

    .word-chip {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        background: var(--bg-hover);
        border: 1px solid var(--border-color);
        border-radius: 99px;
        padding: 0.35rem 0.9rem;
        font-size: 0.9rem;
        font-weight: 600;
        direction: rtl;
    }

    .word-chip button {
        background: none;
        border: none;
        cursor: pointer;
        font-size: 0.85rem;
        color: #f87171;
        padding: 0;
        line-height: 1;
        transition: opacity 0.2s;
    }

    .word-chip button:hover {
        opacity: 0.7;
    }

    .add-word-form {
        display: flex;
        gap: 0.75rem;
        align-items: center;
        margin-top: 0.5rem;
    }

    .add-word-form input {
        flex: 1;
        background: var(--bg-hover);
        border: 1px solid var(--border-color);
        border-radius: 8px;
        color: var(--text-primary);
        font-family: inherit;
        font-size: 1rem;
        padding: 0.65rem 1rem;
        outline: none;
        transition: border-color 0.2s;
        direction: rtl;
    }

    .add-word-form input:focus {
        border-color: var(--primary-color);
    }

    .btn-add-word {
        background: linear-gradient(135deg, #6366f1, #8b5cf6);
        color: white;
        border: none;
        border-radius: 8px;
        padding: 0.65rem 1.4rem;
        font-family: inherit;
        font-size: 0.95rem;
        font-weight: 700;
        cursor: pointer;
        white-space: nowrap;
        transition: opacity 0.2s;
    }

    .btn-add-word:hover {
        opacity: 0.9;
    }

    .empty-words {
        color: var(--text-secondary);
        font-size: 0.95rem;
        padding: 1rem 0;
    }

    .card {
        background: var(--bg-card);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
    }

    .flash {
        padding: 0.75rem 1rem;
        border-radius: 8px;
        margin-bottom: 1rem;
        font-weight: 600;
    }

    .flash-ok {
        background: #16a34a22;
        color: #4ade80;
    }

    .flash-err {
        background: #dc262622;
        color: #f87171;
    }
</style>
{% endblock %}

{% block nav %}
<nav class="navbar">
    <div class="nav-brand">
        <span class="nav-logo">ğŸ¤–</span>
        <span class="nav-title">Vex</span>
        <span class="nav-badge">@{{ bot_username }}</span>
    </div>
    <div class="nav-links">
        <a href="/dashboard/" class="nav-link">ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
        <a href="/dashboard/groups" class="nav-link active">ğŸ‘¥ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª</a>
        <a href="/dashboard/users" class="nav-link">ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</a>
        <a href="/dashboard/logs" class="nav-link">ğŸ“‘ Ø§Ù„Ø³Ø¬Ù„Ø§Øª</a>
        <a href="/dashboard/ai-stats" class="nav-link">ğŸ“ˆ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</a>
        <a href="/dashboard/ai-providers" class="nav-link">ğŸ¤– Ù…Ø²ÙˆØ¯Ùˆ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</a>
        <a href="/dashboard/ai-prompt" class="nav-link">âœï¸ Ø¨Ø±ÙˆÙ…Ø¨Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</a>
    </div>
</nav>
{% endblock %}

{% block content %}
<div class="dashboard">
    <a href="/dashboard/groups" style="color:var(--text-secondary);font-size:0.9rem;">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª</a>
    <h1 class="page-title" style="margin-top:0.75rem;">
        ğŸš« ÙƒÙ„Ù…Ø§Øª Ù…Ø­Ø¸ÙˆØ±Ø© â€” {{ group.group_name }}
    </h1>
    <p style="color:var(--text-secondary);margin-bottom:1.5rem;font-size:0.9rem;">
        Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©: <code>{{ group.telegram_group_id }}</code>
    </p>

    {% if msg %}
    <div class="flash {% if 'ØªÙ…' in msg %}flash-ok{% else %}flash-err{% endif %}">{{ msg }}</div>
    {% endif %}

    <!-- Current words -->
    <div class="card">
        <h2 style="margin:0 0 1rem;font-size:1rem;">ğŸ“‹ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© ({{ words|length }})</h2>
        {% if words %}
        <div class="words-grid">
            {% for w in words %}
            <span class="word-chip">
                {{ w.word }}
                <form method="post" action="/dashboard/groups/{{ group.id }}/words/{{ w.id }}/delete"
                    style="display:inline">
                    <button type="submit" title="Ø­Ø°Ù">âœ•</button>
                </form>
            </span>
            {% endfor %}
        </div>
        {% else %}
        <p class="empty-words">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒÙ„Ù…Ø§Øª Ù…Ø­Ø¸ÙˆØ±Ø© Ø¨Ø¹Ø¯.</p>
        {% endif %}
    </div>

    <!-- Add word -->
    <div class="card">
        <h2 style="margin:0 0 1rem;font-size:1rem;">â• Ø¥Ø¶Ø§ÙØ© ÙƒÙ„Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©</h2>
        <form method="post" action="/dashboard/groups/{{ group.id }}/words/add" class="add-word-form">
            <input type="text" name="word" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„ÙƒÙ„Ù…Ø© Ù‡Ù†Ø§..." required autocomplete="off">
            <button type="submit" class="btn-add-word">Ø¥Ø¶Ø§ÙØ©</button>
        </form>
        <p style="color:var(--text-secondary);font-size:0.8rem;margin-top:0.75rem;">
            ğŸ’¡ ØªØªØ­Ù‚Ù‚ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø§Ù„ØªÙƒØ±Ø§Ø± â€” Ù„Ù† ØªÙØ¶Ø§Ù Ø§Ù„ÙƒÙ„Ù…Ø© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙˆØ¬ÙˆØ¯Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹.
        </p>
    </div>
</div>
{% endblock %}