{% extends "base.html" %}
{% block title %}Vex â€” Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†{% endblock %}
{% block page_title %}ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† ÙˆØ§Ù„Ù…Ø­Ø¸ÙˆØ±ÙˆÙ†{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† ÙˆØ§Ù„Ù…Ø­Ø¸ÙˆØ±ÙˆÙ†</h1>
    <p class="page-subtitle">Ø¥Ø¯Ø§Ø±Ø© Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ø¸ÙˆØ±ÙŠÙ† Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</p>
</div>

<!-- Add to blocklist -->
<div class="card" style="margin-bottom:1rem;">
    <h2 style="font-size:0.95rem;font-weight:700;color:var(--primary);margin-bottom:1rem;">â• Ø­Ø¸Ø± Ù…Ø³ØªØ®Ø¯Ù…</h2>
    <form method="post" action="/dashboard/users/block"
        style="display:flex;gap:0.75rem;align-items:flex-end;flex-wrap:wrap;">
        <div class="form-group" style="flex:1;min-width:160px;">
            <label class="form-label">Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
            <input class="input" type="text" name="user_id" placeholder="123456789" required>
        </div>
        <div class="form-group" style="flex:2;min-width:200px;">
            <label class="form-label">Ø§Ù„Ø³Ø¨Ø¨ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
            <input class="input" type="text" name="reason" placeholder="Ø³Ø¨Ø¨ Ø§Ù„Ø­Ø¸Ø±...">
        </div>
        <button type="submit" class="btn btn-danger">ğŸš« Ø­Ø¸Ø±</button>
    </form>
</div>

<!-- Blocked list -->
<div class="card" style="padding:0;">
    <div style="padding:1rem 1.25rem;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:0.5rem;">
        <span style="font-weight:700;color:var(--primary);">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ø¸ÙˆØ±ÙŠÙ†</span>
        <span class="badge badge-danger">{{ blocked_users | length }}</span>
    </div>
    {% if blocked_users %}
    <div class="table-wrap">
        <table class="table">
            <thead>
                <tr>
                    <th>Ø§Ù„Ù…Ø¹Ø±Ù</th>
                    <th>Ø§Ù„Ø³Ø¨Ø¨</th>
                    <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¸Ø±</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {% for u in blocked_users %}
                <tr>
                    <td><code style="font-size:0.85rem;">{{ u.user_id }}</code></td>
                    <td style="color:var(--text-muted);">{{ u.reason or 'â€”' }}</td>
                    <td style="color:var(--text-muted);font-size:0.8rem;">{{ u.created_at.strftime('%Y-%m-%d') if
                        u.created_at else 'â€”' }}</td>
                    <td>
                        <form method="post" action="/dashboard/users/unblock/{{ u.user_id }}"
                            onsubmit="return confirm('Ø±ÙØ¹ Ø§Ù„Ø­Ø¸Ø±ØŸ')">
                            <button type="submit" class="btn btn-success btn-sm">âœ… Ø±ÙØ¹ Ø§Ù„Ø­Ø¸Ø±</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="empty-state">
        <div class="empty-state-icon">âœ…</div>
        <div class="empty-state-text">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ù…Ø­Ø¸ÙˆØ±ÙˆÙ†</div>
    </div>
    {% endif %}
</div>
{% endblock %}